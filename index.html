<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- displays site properly based on user's device -->

  <link rel="icon" type="image/png" sizes="32x32" href="./assets/images/favicon-32x32.png">
  <link rel="stylesheet" href="./style.css">
  <title>Frontend Mentor | Product list with cart</title>

</head>

<body>
  <header class="header">
    <h1 class="title main-title">
      Desserts
    </h1>
  </header>
  <main class="main">
    <ul class="list products">
      <li>
        <article class="product-card">
          <div class="product-wrapper">
            <div class="img-wrapper">
              <picture>
                <source media="(min-width: 840px)" srcset="./assets/images/image-waffle-desktop.jpg" width="250">
                <source media="(min-width: 620px)" srcset="./assets/images/image-waffle-tablet.jpg" width="214">
                <img src="./assets/images/image-waffle-mobile.jpg" alt="Waffles with berries" width="325">
              </picture>
            </div>
            <div class="controls">
              <button type="button" class="add-to-cart button">Add to cart</button>
              <form action="#" class="amount-form">
                <input type="hidden" name="name" value="cake">
                <div class="input-wrapper">
                  <button type="button" class="amount-controll less button">
                    <span class="visually-hidden">Less</span>
                  </button>
                  <div class="input-container">
                    <input type="text" class="amount-input" value="1">
                  </div>
                  <button type="button" class="amount-controll more button">
                    <span class="visually-hidden">More</span>
                  </button>
                </div>
              </form>
            </div>
          </div>
          <h4 class="title category">Waffle</h4>
          <h3 class="title product-title">Waffle with Berries</h3>
          <p class="text product-price">$6.50</p>
        </article>
      </li>
    </ul>
  </main>
  <footer class="footer">
    <article class="cart">
      <h2 class="title">Your cart (<span class="cart-amount">0</span>)</h2>
      <div class="cart-content">
        <ul class="list cart__list remove js-cart-list">
          <li class="cart__item">
            <div class="content">
              <h3 class="title">Classic Tiramisu</h3>
              <p class="text"><span class="amount">1x</span><span class="price">@ $5.50</span><span
                  class="total">$5.50</span>
              </p>
            </div>
            <button class="button delete-item">
              <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" fill="none" viewBox="0 0 10 10">
                <path fill="#CAAFA7"
                  d="M8.375 9.375 5 6 1.625 9.375l-1-1L4 5 .625 1.625l1-1L5 4 8.375.625l1 1L6 5l3.375 3.375-1 1Z" />
              </svg>
            </button>
          </li>
          <li class="cart__item">
            <div class="content">
              <h3 class="title">Classic Tiramisu</h3>
              <p class="text"><span class="amount">1x</span><span class="price">@ $5.50</span><span
                  class="total">$5.50</span>
              </p>
            </div>
            <button class="button delete-item">
              <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" fill="none" viewBox="0 0 10 10">
                <path fill="#CAAFA7"
                  d="M8.375 9.375 5 6 1.625 9.375l-1-1L4 5 .625 1.625l1-1L5 4 8.375.625l1 1L6 5l3.375 3.375-1 1Z" />
              </svg>
            </button>
          </li>
          <li class="cart__item">
            <div class="content">
              <h3 class="title">Classic Tiramisu</h3>
              <p class="text"><span class="amount">1x</span><span class="price">@ $5.50</span><span
                  class="total">$5.50</span>
              </p>
            </div>
            <button class="button delete-item">
              <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" fill="none" viewBox="0 0 10 10">
                <path fill="#CAAFA7"
                  d="M8.375 9.375 5 6 1.625 9.375l-1-1L4 5 .625 1.625l1-1L5 4 8.375.625l1 1L6 5l3.375 3.375-1 1Z" />
              </svg>
            </button>
          </li>
        </ul>
        <p class="text order-total remove">
          <span>Order Total</span><span class="nubmer">$46.50</span>
        </p>
        <p class="text carboneutral remove">
          <svg xmlns="http://www.w3.org/2000/svg" width="21" height="20" fill="none" viewBox="0 0 21 20">
            <path fill="#1EA575"
              d="M8 18.75H6.125V17.5H8V9.729L5.803 8.41l.644-1.072 2.196 1.318a1.256 1.256 0 0 1 .607 1.072V17.5A1.25 1.25 0 0 1 8 18.75Z" />
            <path fill="#1EA575"
              d="M14.25 18.75h-1.875a1.25 1.25 0 0 1-1.25-1.25v-6.875h3.75a2.498 2.498 0 0 0 2.488-2.747 2.594 2.594 0 0 0-2.622-2.253h-.99l-.11-.487C13.283 3.56 11.769 2.5 9.875 2.5a3.762 3.762 0 0 0-3.4 2.179l-.194.417-.54-.072A1.876 1.876 0 0 0 5.5 5a2.5 2.5 0 1 0 0 5v1.25a3.75 3.75 0 0 1 0-7.5h.05a5.019 5.019 0 0 1 4.325-2.5c2.3 0 4.182 1.236 4.845 3.125h.02a3.852 3.852 0 0 1 3.868 3.384 3.75 3.75 0 0 1-3.733 4.116h-2.5V17.5h1.875v1.25Z" />
          </svg>
          This is a <strong>carbon-neutral</strong> delivery
        </p>
        <button type="button" class="button button--accent remove js-confirm-order">
          Confirm order
        </button>
        <p class="text filler appear">
          Your added items will appear here
        </p>
      </div>
    </article>
  </footer>
  <div class="confirm-order-popup">
    <article class="confirm-order">
      <div class="decor"></div>
      <h2 class="title">Order confirmed</h2>
      <p class="text">We hope you enjoy your food!</p>
      <div class="order-summary">
        <ul class="list order-list">
          <li>
            <div class="thumbnail-wrapper">
              <img src="./assets/images/image-cake-thumbnail.jpg" alt="cake">
            </div>
            <h3 class="title">Classic Tiramisu</h3>
            <p class="text"><span class="amount">1x</span><span class="price">@ $5.50</span>
            </p>
            <p class="text item-total">$5.50</p>
          </li>
        </ul>
        <p class="text order-total">
          <span>Order Total</span><span class="nubmer">$46.50</span>
        </p>
      </div>
      <button type="button" class="button button--accent js-start-new-order">
        Start new order
      </button>
    </article>
  </div>
  <template id="productCard">
    <li>
      <article class="product-card">
        <div class="product-wrapper">
          <div class="img-wrapper">
            <picture>
              <source media="(min-width: 840px)" srcset="./assets/images/image-waffle-desktop.jpg" width="250">
              <source media="(min-width: 620px)" srcset="./assets/images/image-waffle-tablet.jpg" width="214">
              <img src="./assets/images/image-waffle-mobile.jpg" alt="Waffles with berries" width="325">
            </picture>
          </div>
          <div class="controls">
            <button type="button" class="add-to-cart button">Add to cart</button>
            <form action="#" class="amount-form">
              <input type="hidden" name="name" value="cake">
              <div class="input-wrapper">
                <button type="button" class="amount-controll less button">
                  <span class="visually-hidden">Less</span>
                </button>
                <div class="input-container">
                  <input type="text" class="amount-input" value="1">
                </div>
                <button type="button" class="amount-controll more button">
                  <span class="visually-hidden">More</span>
                </button>
              </div>
            </form>
          </div>
        </div>
        <h4 class="title category">Waffle</h4>
        <h3 class="title product-title">Waffle with Berries</h3>
        <p class="text product-price">$6.50</p>
      </article>
    </li>
  </template>
  <template id="cartItem">
    <li>
      <h3 class="title">Classic Tiramisu</h3>
      <p class="text"><span class="amount">1x</span><span class="price">@ $5.50</span><span class="total">$5.50</span>
      </p>
      <button class="button delete-item">
        <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" fill="none" viewBox="0 0 10 10">
          <path fill="#CAAFA7"
            d="M8.375 9.375 5 6 1.625 9.375l-1-1L4 5 .625 1.625l1-1L5 4 8.375.625l1 1L6 5l3.375 3.375-1 1Z" />
        </svg>
      </button>
    </li>
  </template>

  <div class="attribution">
    Challenge by <a href="https://www.frontendmentor.io?ref=challenge">Frontend Mentor</a>.
    Coded by <a href="#">Your Name Here</a>.
  </div>
  <script>
    const addButton = document.querySelector('.add-to-cart');
    const controlsContainer = document.querySelector('.controls');
    const form = document.querySelector('form.amount-form');
    const amountControlls = [...form.querySelectorAll('.amount-controll')];
    const amountInput = form.querySelector('.amount-input');

    const order = {};

    addButton.addEventListener('click', onAddButtonClick)

    amountControlls.forEach(controll => {
      controll.addEventListener('click', onAmountControllClick);
    })

    function onAddButtonClick() {
      amountInput.value = 1;
      controlsContainer.classList.add('purchase');
    }

    function onAmountControllClick(evt) {
      console.log(evt.target.closest('form').querySelector('input[name="name"]'));
      let less = evt.currentTarget.classList.contains('less');
      let increase = less ? -1 : 1;
      if (Number(amountInput.value) === 0 && less) {
        controlsContainer.classList.remove('purchase');
        return;
      };
      amountInput.value = +amountInput.value + increase;
    }
  </script>
</body>

</html>